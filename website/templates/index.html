{% extends "base.html" %}
{% block content %}
<div x-data="{ promptCount: 0, prompt: '' }" class="bg-gray-800 p-6 rounded-lg shadow-lg">
    <h1 class="text-3xl font-bold mb-4 text-center">Bolet√≠n Oficial RAG</h1>
    <div id="chat-box" class="border border-gray-700 p-4 h-96 overflow-y-auto bg-gray-900 rounded mb-4">
        <div class="text-gray-400">Welcome! Ask me anything about the Argentinian Official Bulletin. You have 3 free prompts.</div>
    </div>
    <form 
        @submit="promptCount++"
        hx-encoding="multipart/form-data"
        hx-target="#chat-box" 
        hx-swap="beforeend"
        class="flex space-x-2"
    >
        <input 
            type="text" 
            name="prompt" 
            x-model="prompt"
            class="w-full p-2 bg-gray-700 border border-gray-600 rounded text-white focus:outline-none focus:ring-2 focus:ring-blue-500" 
            placeholder="Ask a question..."
        >
        <button 
            type="submit"
            :hx-post="promptCount < 2 ? '/chat' : '/signup'"
            :hx-target="promptCount < 2 ? '#chat-box' : 'body'"
            :hx-swap="promptCount < 2 ? 'beforeend' : 'innerHTML'"
            class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded"
        >
            Send
        </button>
    </form>
</div>
{% endblock %}
